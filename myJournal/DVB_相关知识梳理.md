



####调试环境
1. B180_TM_3716M项目代码hi3716_tm_ranger.env环境变量
2. local_RDA5815S_8065.env 本地dvb相关环境变量设置

####dvb的几款板子情况简述如下：
dvb-s/s2:  
板子型号 平台 demod lnb tuner  
8845 3716C avl6211 st lnbh23 sharp7903  
8865(大小坂) 3716C avl6211 allegro8290 sharp7903  
8015 3716M avl6211 st lnbh23 rda 5815s  
8065(大小版) 3716M avl6211 allegro8290 rda 5815s  
8015(第二版) 3716M Si2166B allegro8290 rda 5815s  
dvb-c:  
平台      tuner  
3716C  tmx7070x  
3716M  r820c  

####dvb-s码流发射器即使在不发流的时候也有ts波形量到，也能锁频成功，清查问题时候注意

####8290 lnb
1. 8290上电以后，会自动产生一个中断响应，要先读一下内部的状态寄存器，把中断清除，然后再写入控制寄存器。
2. ENB即使reset也能有电压输出，应该是硬件设计不严谨
3. 一次读取两个字节数据可以将其两个状态寄存器数值读出，每次读一个字节则只能得到第一个寄存器的内容，跟文档描述不一致
4. 查询cable线插拔时候，需要设置ENB,CADT,VSEL0-VSEL3。关键是设置完后有个等待时间（差不多1000us以上）再去读取状态寄存器才会得到对应的结果。（由驱动中的一句打印产生延时的巧合发现该问题）

####8015调试
8015上计算信号强度时候，在avlink实验室发不同信号强度信号，读取寄存器值，然后对这两个值做了个对应关系，大概是一个分两段的线性关系，于是matlab做了个回归方程。原始数据如下：  
![pic_005](res/DVB_相关知识梳理/dvb_005.png)  

####8865调试
1. 采用gpio模拟i2c，A1 sdk中对gpioi2c做了一些改动，需求读写时序：设备地址、W、数据；设备地址、R、数据。diff：  
![pic_004](res/DVB_相关知识梳理/dvb_004.png)  
2. sdk中libhijpge.so copy一个libjpge.so
3. 一个奇怪的问题，在能锁频、也能量到ts波形情况下依旧不能播放，用示波器去量ts的clk引脚就能播放出来！！！------- clk总线太长
4. 另一个奇怪的问题，能播放但有马赛克，示波器量ts clk引脚马赛克消失  ------- clk总线太长
5. 调试几下小板废掉  ---------多了块电容

####I2C配置
1. gpio管脚则需配置gpio为i2c模式  
2. sw_i2c_open对应i2c的id  

####dvbs发流设备
![pic_003](res/DVB_相关知识梳理/dvb_003.png)  
![pic_002](res/DVB_相关知识梳理/dvb_002.png)  
![pic_001](res/DVB_相关知识梳理/dvb_001.png)  
